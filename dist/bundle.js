(()=>{"use strict";let e=10;function t(t){t.deltaY>0?e=Math.max(.1,e-1):t.deltaY<0&&(e=Math.min(500,e+1)),n()}function n(){document.documentElement.setAttribute("style","--canvasLeft: "+B.x+"px; --canvasTop: "+B.y+"px; --canvasHeight: "+F.height*e+"px; --canvasWidth: "+F.width*e+"px; ")}const i=document.getElementById("color");let d=i.value;function o(){d=i.value,w.strokeStyle=d}const l=document.getElementById("size");let a=l.value;function c(){a=l.value,w.lineWidth=a}let u=0,m=0;function s(e,t){u=e,m=t}function r(e){const t=canvas.getBoundingClientRect(),n=canvas.width/t.width,i=canvas.height/t.height;return{x:(e.clientX-t.left)*n,y:(e.clientY-t.top)*i}}let h=!1;function p(e){if(0!==e.button)return;h=!0;let t=r(e);w.beginPath(),w.lineTo(Math.ceil(t.x)-a/2,Math.ceil(t.y)-a/2),w.lineTo(Math.ceil(t.x)-a/2,Math.ceil(t.y)-a/2),w.stroke()}function v(e){if(!h)return;let t=r(e);w.lineTo(Math.ceil(t.x)-a/2,Math.ceil(t.y)-a/2),w.stroke()}function E(){h=!1,w.closePath()}let g=!1;function f(e){2===e.button&&(g=!0,s(e.clientX,e.clientY))}function y(e){if(!g)return;let t=function(e){const t=e.clientX,n=e.clientY,i=t-u,d=n-m;return u=t,m=n,{x:i,y:d}}(e);B.x+=t.x,B.y+=t.y,n()}function b(e){g=!1,s(e.clientX,e.clientY)}const x=document.getElementById("info"),C=document.getElementById("canvas"),L=document.getElementById("canvas-container"),w=(document.getElementById("canvas-wrapper"),C.getContext("2d"));let B={x:0,y:0},F={width:64,height:64};function I(e,t){C.width=e,C.height=t,n(),x.textContent=F.width+"x"+F.height}function M(e,u,m){F.width=e,F.height=u,I(e,u),w.fillStyle=m,w.fillRect(0,0,F.width,F.height),n(),L.addEventListener("mousedown",f),L.addEventListener("mousemove",y),L.addEventListener("mouseup",b),L.addEventListener("mouseleave",b),L.addEventListener("wheel",t),L.addEventListener("resize",I,F.width,F.height),w.globalAlpha=2,w.lineCap="square",w.lineJoin="bevel",w.lineWidth=a,w.strokeStyle=d,C.addEventListener("mousedown",p),L.addEventListener("mousemove",v),L.addEventListener("mouseup",E),L.addEventListener("mouseleave",E),c(),l.addEventListener("change",c),o(),i.addEventListener("change",o)}const k=document.getElementById("new-button");function Y(){document.getElementById("popup-bg").remove()}document.getElementById("save-button").addEventListener("mouseup",(function(){var e=document.createElement("a");e.download="image.png",e.href=document.getElementById("canvas").toDataURL(),e.click()})),k.addEventListener("mouseup",(function(){const e=document.createElement("div"),t=document.createElement("div"),n=document.createElement("button"),i=document.createElement("label"),d=document.createElement("input"),o=document.createElement("label"),l=document.createElement("input"),a=document.createElement("label"),c=document.createElement("input"),u=document.createElement("button");e.setAttribute("id","popup-bg"),t.setAttribute("id","popup"),n.setAttribute("id","close-button"),d.type="color",l.type="number",c.type="number",i.textContent="Background color",o.textContent="Width",a.textContent="Height",n.textContent="X",u.textContent="Create",l.value=64,c.value=64,d.value="#FFFFFF",document.body.appendChild(e),e.appendChild(t),t.appendChild(n),t.appendChild(i),t.appendChild(d),t.appendChild(o),t.appendChild(l),t.appendChild(a),t.appendChild(c),t.appendChild(u),n.addEventListener("mouseup",Y),u.addEventListener("mouseup",(()=>(M(l.value,c.value,d.value),void Y())))})),M(64,64,"#FFFFFF")})();