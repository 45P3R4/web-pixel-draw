(()=>{"use strict";let e=1;function t(){document.documentElement.setAttribute("style","--canvasLeft: "+o.x+"px; --canvasTop: "+o.y+"px; --canvasHeight: "+a.height*e+"px; --canvasWidth: "+a.width*e+"px; ")}const n=document.getElementById("canvas"),i=document.getElementById("canvas-container"),c=(document.getElementById("canvas-wrapper"),n.getContext("2d"));let o={x:0,y:0},a={width:32,height:64};function d(){n.width=a.width,n.height=a.height,t()}let l=0,u=0;function s(e,t){l=e,u=t}function h(e){const t=canvas.getBoundingClientRect(),n=canvas.width/t.width,i=canvas.height/t.height;return{x:(e.clientX-t.left)*n,y:(e.clientY-t.top)*i}}let r=!1;function m(e){r=!1,s(e.clientX,e.clientY)}const v=document.getElementById("color");let g=v.value;v.onchange=function(){g=this.value};const f=document.getElementById("size");let E=f.value;f.onchange=function(){E=this.value};let y=!1;function w(){y=!1,c.closePath()}const x=document.getElementById("new-button"),L=document.getElementById("save-button");d(),c.fillStyle="#FFFFFF",c.fillRect(0,0,a.width,a.height),t(),n.addEventListener("mousedown",(function(e){if(0!==e.button)return;y=!0;let t=h(e);c.lineWidth=E,c.strokeStyle=g,c.beginPath(),c.rect(Math.ceil(t.x)-.5,Math.ceil(t.y)-.5,E,E),c.stroke()})),n.addEventListener("mousemove",(function(e){if(!y)return;let t=h(e);c.lineTo(Math.ceil(t.x)-.5,Math.ceil(t.y)-.5),c.stroke()})),n.addEventListener("mouseup",w),n.addEventListener("mouseleave",w),i.addEventListener("wheel",(function(n){n.deltaY>0?e=Math.max(.1,e-1):n.deltaY<0&&(e=Math.min(500,e+1)),console.log(e),t()})),i.addEventListener("mousedown",(function(e){2===e.button&&(r=!0,s(e.clientX,e.clientY))})),i.addEventListener("mousemove",(function(e){if(!r)return;let n=function(e){const t=e.clientX,n=e.clientY,i=t-l,c=n-u;return l=t,u=n,{x:i,y:c}}(e);o.x+=n.x,o.y+=n.y,t()})),i.addEventListener("mouseup",m),i.addEventListener("mouseleave",m),i.addEventListener("resize",d),x.addEventListener("mouseup",(function(){c.clearRect(0,0,a.width,a.height)})),L.addEventListener("mouseup",(function(){var e=document.createElement("a");e.download="image.png",e.href=document.getElementById("canvas").toDataURL(),e.click()}))})();