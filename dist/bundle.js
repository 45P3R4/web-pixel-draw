(()=>{"use strict";let e=10;function t(){document.documentElement.setAttribute("style","--canvasLeft: "+a.x+"px; --canvasTop: "+a.y+"px; --canvasHeight: "+l.height*e+"px; --canvasWidth: "+l.width*e+"px; ")}const n=document.getElementById("info"),i=document.getElementById("canvas"),o=document.getElementById("canvas-container"),c=(document.getElementById("canvas-wrapper"),i.getContext("2d"));let a={x:0,y:0},l={width:64,height:64};function d(){i.width=l.width,i.height=l.height,t(),n.textContent=l.width+"x"+l.height}function u(){d(),c.fillStyle="#FFFFFF",c.fillRect(0,0,l.width,l.height),t()}let s=0,h=0;function m(e,t){s=e,h=t}function r(e){const t=canvas.getBoundingClientRect(),n=canvas.width/t.width,i=canvas.height/t.height;return{x:(e.clientX-t.left)*n,y:(e.clientY-t.top)*i}}let v=!1;function g(e){v=!1,m(e.clientX,e.clientY)}const f=document.getElementById("new-button");const E=document.getElementById("save-button");const y=document.getElementById("color");let x=y.value;y.onchange=function(){x=this.value,c.strokeStyle=x};const p=document.getElementById("size");let w=p.value;p.onchange=function(){w=this.value,c.lineWidth=w};let L=!1;function B(){L=!1,c.closePath()}E.addEventListener("mouseup",(function(){var e=document.createElement("a");e.download="image.png",e.href=document.getElementById("canvas").toDataURL(),e.click()})),f.addEventListener("mouseup",(function(){c.clearRect(0,0,l.width,l.height),u()})),u(),o.addEventListener("mousedown",(function(e){2===e.button&&(v=!0,m(e.clientX,e.clientY))})),o.addEventListener("mousemove",(function(e){if(!v)return;let n=function(e){const t=e.clientX,n=e.clientY,i=t-s,o=n-h;return s=t,h=n,{x:i,y:o}}(e);a.x+=n.x,a.y+=n.y,t()})),o.addEventListener("mouseup",g),o.addEventListener("mouseleave",g),o.addEventListener("wheel",(function(n){n.deltaY>0?e=Math.max(.1,e-1):n.deltaY<0&&(e=Math.min(500,e+1)),t()})),o.addEventListener("resize",d),c.globalAlpha=2,c.lineCap="square",c.lineWidth=w,c.strokeStyle=x,i.addEventListener("mousedown",(function(e){if(0!==e.button)return;L=!0;let t=r(e);c.beginPath(),c.lineTo(Math.ceil(t.x)-w/2,Math.ceil(t.y)-w/2),c.lineTo(Math.ceil(t.x)-w/2,Math.ceil(t.y)-w/2),c.stroke()})),o.addEventListener("mousemove",(function(e){if(!L)return;let t=r(e);c.lineTo(Math.ceil(t.x)-w/2,Math.ceil(t.y)-w/2),c.stroke()})),o.addEventListener("mouseup",B),o.addEventListener("mouseleave",B)})();